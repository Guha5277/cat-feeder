## Сервис управления железом кормушки

добавить описание и основные цели проекта

### TODO:

1. Определить бизнес-логику
2. Определить верхнеуровневые задачи
   1. Детальный список работ


1. Цель проекта:
   1. Приложение осуществляет непосредственное взаимодействие с hardware частью кормушки. Содержит в себе набор низкоуровневых алгоритмов работы
   (выдача корма - все этапы, контроль выполнения)
   2. Предоставляет верхнеуровневое API с набором простых и понятных команд на исполнение
   3. Возможность конфигурирования и кастомизации работы приложения "на лету"
   4. Отправка логов, ошибок и предупреждений в централизованное хранилище
   5. Отказоустойчивость системы - перезапуск отдельных модулей и главного блока управления (с сохранением промежуточного состояния)

### Описание API
1. Авторизация
2. Команды:
   1. Выдать корм
   2. Перезапустить систему
   3. Остаток корма
   4. Статистика:
      1. Последний визит кота
      2. Последний приём пищи - продолжительность визита и количество съеденного
      3. Статистика по интервалам времени (день, месяц, год и т.д.) - информация о количестве визитов, количестве потребляемой пиши, средних значениях и возможной динамики показателей
3. Уведомления:
   1. Кот кушаетс
   2. Малый объем корма в контейнере
   3. Закончился корм в контейнере
   4. Неисправность оборудования
   5. Периодические уведомления (завязанные на динамике - кушает чаще, кушает реже, не кушает вовсе)
4. Пользовательские сценарии:
   1. Выдача корма по таймеру (пр. два раза в день по 30 грамм)
   2. Поддержание определенного количества корма в миске (задаётся требуемый объём)
   3. Калибровка и первоначальная настройка оборудования


## ФТ

### Состояния системы
   **READY**\
   **FEEDING**\
   **ERROR** (программная или хардварная ошибка не позволяющая продолжить работу)

Реализация через Spring StateMachine:
Тут либо:
1. Можно написать общий сервис изменения состояния, к которому будут обращаться контроллеры.
2. Можно писать отдельные Guard-ы, которые будут проверять текущее состояние системы
Само действие(такое как выдача корма), будет выполняться в специальном Action-е.

## Выдача корма
### Состояние

0. Система находится в состоянии IDLE или ERROR
1. Пользователь запрашивает выдачу корма
2. Система переходит в состояние FEEDING
3. По окончанию выдачи переходит в состояние IDLE (через отмену или завершение выдачи) 

### Процесс

| №   | Given                                        | When                                                     | Then                |
|-----|----------------------------------------------|----------------------------------------------------------|---------------------|
| 0   | Система находится в состоянии IDLE или ERROR | Пользователь(или система) запускает процесс выдачи корма | Переход к пункту №1 |
| 1   | Система перешла в состояние FEEDING          |                                                          |                     |
|     |                                              |                                                          |                     |

1. Пользователь (или Scheduler) инициализирует выдачу корма
2. Происходит циклический процесс - вращение шнека, взвешивание, вращение до тех пор пока не будет набрано необходимое значение
3. 

### Статистика (должна ли статистика вестись локально или глобально, с отправкой в облако? Можно сделать комбинированный вариант - вести локально, бэкапить в облако для доступа к системе онлайн):

### Анализ оставшегося корма в миске (чтобы добавлять только требуемый объём)

### Системная информация - грамотное ведение логов, автоматическое получение лог-файла для анализа (при оформлении баг-репорта)